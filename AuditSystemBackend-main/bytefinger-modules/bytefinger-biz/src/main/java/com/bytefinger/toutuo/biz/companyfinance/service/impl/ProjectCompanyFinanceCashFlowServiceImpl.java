package com.bytefinger.toutuo.biz.companyfinance.service.impl;import com.baomidou.mybatisplus.core.metadata.IPage;import com.baomidou.mybatisplus.extension.plugins.pagination.Page;import com.baomidou.mybatisplus.extension.service.impl.ServiceImpl;import com.bytefinger.common.das.domain.vo.QueryPage;import com.bytefinger.common.security.annotation.DataFill;import com.bytefinger.toutuo.biz.companyfinance.domain.ProjectCompanyFinanceAssets;import com.bytefinger.toutuo.biz.companyfinance.domain.ProjectCompanyFinanceCashFlow;import com.bytefinger.toutuo.biz.companyfinance.domain.ProjectCompanyFinanceProfit;import com.bytefinger.toutuo.biz.companyfinance.mapper.ProjectCompanyFinanceCashFlowMapper;import com.bytefinger.toutuo.biz.companyfinance.service.IProjectCompanyFinanceCashFlowService;import com.bytefinger.toutuo.common.service.BizService;import lombok.AllArgsConstructor;import org.springframework.stereotype.Service;import org.springframework.util.CollectionUtils;import java.util.List;import java.util.stream.Collectors;/** * <p> * 财务现金流信息 服务实现类 * </p> * * @author Jone * @since 2023-03-23 */@Service@AllArgsConstructorpublic class ProjectCompanyFinanceCashFlowServiceImpl extends BizService<ProjectCompanyFinanceCashFlowMapper, ProjectCompanyFinanceCashFlow> implements IProjectCompanyFinanceCashFlowService {    private final ProjectCompanyFinanceCashFlowMapper projectCompanyFinanceCashFlowMapper;    @DataFill    @Override    public IPage<ProjectCompanyFinanceCashFlow> page(QueryPage queryPage) {        return this.page(queryPage.toPage(), queryPage.getWrapper());    }    @DataFill    @Override    public IPage<ProjectCompanyFinanceCashFlow> page(Long stepMenuId, QueryPage queryPage) {        queryPage.getParams().put("stepMenuId",stepMenuId);        Page<ProjectCompanyFinanceCashFlow> page = projectCompanyFinanceCashFlowMapper.list(queryPage.toPage(),queryPage.getWrapperByPrefix("pcfcf."));       // Page<ProjectCompanyFinanceCashFlow> page = this.page(queryPage.toPage(), queryPage.getWrapper());        if(CollectionUtils.isEmpty(page.getRecords())){            return page;        }        super.dataFillDcoument(stepMenuId, page);        List<ProjectCompanyFinanceCashFlow> list = page.getRecords().stream().filter(v -> !CollectionUtils.isEmpty(v.getDocumentTemplateList()) && v.getDocumentTemplateList().size() > 0).collect(Collectors.toList());        page.setRecords(list);        return page;    }}