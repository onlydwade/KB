package com.bytefinger.toutuo.biz.project.service.impl;import com.baomidou.mybatisplus.core.toolkit.Wrappers;import com.baomidou.mybatisplus.extension.service.impl.ServiceImpl;import com.bytefinger.toutuo.biz.project.domain.Project;import com.bytefinger.toutuo.biz.project.domain.ProjectRiskInspection;import com.bytefinger.toutuo.biz.project.mapper.ProjectMapper;import com.bytefinger.toutuo.biz.project.mapper.ProjectRiskInspectionMapper;import com.bytefinger.toutuo.biz.project.service.IProjectRiskInspectionService;import com.bytefinger.toutuo.common.enums.ModuleType;import com.bytefinger.toutuo.common.service.SendMessageService;import lombok.AllArgsConstructor;import org.springframework.stereotype.Service;import org.springframework.util.CollectionUtils;import java.util.List;/** * <p> * 项目-风险检查 服务实现类 * </p> * * @author Jone * @since 2023-02-01 */@Service@AllArgsConstructorpublic class ProjectRiskInspectionServiceImpl extends ServiceImpl<ProjectRiskInspectionMapper, ProjectRiskInspection> implements IProjectRiskInspectionService {    private final ProjectRiskInspectionMapper projectRiskInspectionMapper;    private final ProjectMapper projectMapper;    private final SendMessageService sendMessageService;    @Override    public void sendNotifyTask() {        List<ProjectRiskInspection> list = projectRiskInspectionMapper.listByReminderTime();        if(CollectionUtils.isEmpty(list) || list.size() == 0){            return;        }        list.forEach(v -> {            Project project = projectMapper.selectById(v.getProjectId());            sendMessageService.sendMessage(project.getPrincipalId(), project.getId(), v.getNode(), v.getRemark(),                    ModuleType.PROJECT.getCode(), "XI_TONG_TONG_ZHI" + "," + "DAI_BAN_TONG_ZHI");        });    }}