<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd"><mapper namespace="com.bytefinger.toutuo.biz.auditproject.mapper.AuditProjectMapper">    <sql id="selectBaseData">        SELECT            project.*        FROM biz_audit_project project        where 1=1          <choose>            <!--  所在部门及下级部门+员工   -->            <when test="'SHOW_SUB' == cm.dataRole">                <!-- 我部门下的数据 -->                and (                    project.user_id IN (                        select udp.user_id from sys_user_dept_post udp where udp.dept_id in(                        <foreach collection="cm.deptIds" index="index" item="item" open="(" separator="," close=")">                            #{item}                        </foreach>                        )                    )                )                OR project.create_user_id = #{cm.userId}                OR project.mic_user_id = #{cm.userId}                OR project.dic_user_id = #{cm.userId}                OR project.pic_user_id = #{cm.userId}                )            </when>            <!-- 全部数据 -->            <when test="'SHOW_ALL' == cm.dataRole">            </when>            <!-- 默认本人数据 -->            <otherwise>                AND (                project.create_user_id = #{cm.userId}                OR project.create_user_id = #{cm.userId}                OR project.mic_user_id = #{cm.userId}                OR project.dic_user_id = #{cm.userId}                OR project.pic_user_id = #{cm.userId}                )            </otherwise>        </choose>    </sql>    <!-- 项目基础列表 -->    <select id="list" resultType="com.bytefinger.toutuo.biz.auditproject.domain.AuditProject">        <include refid="selectBaseData"></include>        <if test="ew.sqlSegment != '' ">            AND ${ew.sqlSegment}        </if>    </select></mapper>